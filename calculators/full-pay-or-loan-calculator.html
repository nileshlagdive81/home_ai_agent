<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Full Pay or Home Loan Calculator - Real Estate App</title>
    <link rel="stylesheet" href="full-pay-or-loan-calculator.css">

    <link rel="stylesheet" href="../styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <div class="app-container">
        <!-- Left Sidebar - AI Assistant -->
        <div class="sidebar">
            <div class="sidebar-header">
                <button class="new-chat-btn">
                    <i class="fas fa-plus"></i>
                    New Query
                </button>
            </div>
            
            <!-- Include Reusable Chat Component -->
            <div id="chatComponentContainer"></div>
        </div>
        
        <!-- Main Content Area -->
        <div class="main-content">
            <!-- Header -->
            <header class="header">
        <div class="header-content">
            <h1><i class="fas fa-layer-group"></i> Real Estate Search</h1>
            <div class="header-right">
                <a href="../index.html" class="header-link">
                    <i class="fas fa-home"></i> Home
                </a>
                <a href="calculators.html" class="header-link">
                    <i class="fas fa-calculator"></i> Calculators
                </a>
            </div>
        </div>
    </header>

    <!-- Main Calculator Container -->
    <div class="calculator-container">
        <div class="calculator-header">
            <h2>Full Pay or Home Loan Calculator</h2>
            <p>Find out how paying by cash vs taking a home loan plays out</p>
        </div>

        <!-- Left Panel - Sliders -->
        <div class="slider-container">
            <!-- Note: All amounts limited to ₹5 Crores (₹5,00,00,000) -->
            <!-- Row 1: Property Price and Money at Hand -->
            <div class="slider-row">
                <div class="slider-group">
                    <label for="propertyPrice">Property Price: ₹<span id="propertyPriceValue">50,00,000</span></label>
                    <input type="range" id="propertyPrice" min="1000000" max="50000000" value="5000000" step="100000">
                </div>
            </div>
            
            <!-- Row 2: Available Cash -->
            <div class="slider-row">
                <div class="slider-group">
                    <label for="moneyAtHand">Available Cash: ₹<span id="moneyAtHandValue">30,00,000</span></label>
                    <input type="range" id="moneyAtHand" min="100000" max="50000000" value="3000000" step="100000">
                </div>
            </div>
            
            <!-- Row 3: Your Contribution -->
            <div class="slider-row">
                <div class="slider-group">
                    <label for="yourContribution">Your Contribution: ₹<span id="yourContributionValue">10,00,000</span></label>
                    <input type="range" id="yourContribution" min="0" max="50000000" value="1000000" step="100000">
                    <small>Minimum 20% downpayment required by banks. Maximum: Available Cash</small>
                </div>
            </div>
            
            <!-- Row 4: Rent Checkbox and Slider -->
            <div class="slider-row">
                                   <div class="slider-group">
                       <div class="rent-header-container">
                           <label class="field-header">Giving on rent?</label>
                           <div class="rent-checkbox-container">
                               <label class="checkbox-label">
                                   <input type="checkbox" id="rentCheckbox" checked>
                                   <span class="checkmark"></span>
                               </label>
                           </div>
                       </div>
                       <div id="rentSliderContainer" class="rent-slider-container show">
                           <label for="rent">Rent: <span id="rentValue">4</span>%</label>
                           <input type="range" id="rent" min="1" max="15" value="4" step="0.5">
                           <small>% of Property price, 4% is good</small>
                       </div>
                   </div>
            </div>
            
            <!-- Row 5: Interest Rate -->
            <div class="slider-row">
                <div class="slider-group">
                    <label for="interestRate">Interest Rate: <span id="interestRateValue">8.5</span>%</label>
                    <input type="range" id="interestRate" min="7.5" max="12" value="8.5" step="0.1">
                </div>
            </div>
            
            <!-- Row 6: Loan Tenure -->
            <div class="slider-row">
                <div class="slider-group">
                    <label for="loanTenure">Loan Tenure: <span id="loanTenureValue">20</span> years</label>
                    <input type="range" id="loanTenure" min="5" max="30" value="20" step="1">
                </div>
            </div>
            
            <!-- Row 7: Investment Growth Rate -->
            <div class="slider-row">
                <div class="slider-group">
                    <label for="investmentGrowth">Investment Growth Rate: <span id="investmentGrowthValue">10</span>%</label>
                    <input type="range" id="investmentGrowth" min="5" max="15" value="10" step="0.5">
                </div>
            </div>
            
            <!-- Row 8: House Rate Increase -->
            <div class="slider-row">
                <div class="slider-group">
                    <label for="houseRateIncrease">Avg House Rate Increase: <span id="houseRateIncreaseValue">5</span>%</label>
                    <input type="range" id="houseRateIncrease" min="0" max="10" value="5" step="0.5">
                    <small>Annual property appreciation rate</small>
                </div>
            </div>
            
            <!-- Validation Message -->
            <div id="validationMessage" class="validation-message" style="display: none;">
                <i class="fas fa-exclamation-triangle"></i>
                <span id="validationText"></span>
            </div>
        </div>

                <!-- Right Panel - Results -->
        <div class="analysis-report-container">
            <div id="resultsSection" class="results-section">
                <!-- Results will be populated by JavaScript -->
            </div>
        </div>
    </div>
        </div>
        
        <!-- Footer -->
        <footer class="footer">
            <div class="footer-links">
                <a href="#" class="footer-link">
                    <i class="fas fa-check"></i>
                    About Us
                </a>
                <a href="#" class="footer-link">
                    <i class="fas fa-chart-line"></i>
                    Price Trends
                </a>
                <a href="#" class="footer-link">
                    <i class="fas fa-dollar-sign"></i>
                    $ ROI
                </a>
                <a href="calculators.html" class="footer-link">
                    <i class="fas fa-calculator"></i>
                    Calculators
                </a>
                <a href="#" class="footer-link">
                    <i class="fas fa-star"></i>
                    Services
                </a>
            </div>
        </footer>
    </div>

    <!-- JavaScript -->
    <script src="full-pay-or-loan-calculator.js"></script>
    <script src="../script.js"></script>
    
    <!-- Include Reusable Chat Component -->
    <link rel="stylesheet" href="../chat-component.css?v=12">
    <script src="../chat-component.js?v=2"></script>
    <script>
        // Function to load chat component
        function loadChatComponent() {
            fetch('../chat-component.html')
                .then(response => response.text())
                .then(html => {
                    document.getElementById('chatComponentContainer').innerHTML = html;
                    // Re-initialize chat component after loading HTML
                    new ChatComponent();
                })
                .catch(error => console.error('Error loading chat component:', error));
        }

        // Load chat component when DOM is ready
        document.addEventListener('DOMContentLoaded', function() {
            // Check if chat component already exists
            const chatContainer = document.getElementById('chatComponentContainer');
            if (chatContainer && !chatContainer.querySelector('.chat-container')) {
                loadChatComponent();
            } else {
                // Load normally
                loadChatComponent();
            }
        });

        // Also load chat component when page becomes visible (for back button navigation)
        document.addEventListener('pageshow', function(event) {
            if (event.persisted || (window.performance && window.performance.navigation.type === 2)) {
                // Page was loaded from back-forward cache or back button
                setTimeout(loadChatComponent, 100);
            }
        });

        // Additional fallback for back button navigation
        window.addEventListener('focus', function() {
            // Check if chat component is missing
            const chatContainer = document.getElementById('chatComponentContainer');
            if (chatContainer && !chatContainer.querySelector('.chat-container')) {
                loadChatComponent();
            }
        });

        // Periodic check to ensure chat component is always visible
        setInterval(function() {
            const chatContainer = document.getElementById('chatComponentContainer');
            if (chatContainer && !chatContainer.querySelector('.chat-container')) {
                loadChatComponent();
            }
        }, 2000); // Check every 2 seconds
    </script>
</body>
</html>
