<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Project Details - Skyline Residency</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="chat-component.css?v=12">
    <link rel="stylesheet" href="header-component.css?v=1">
    <link rel="stylesheet" href="project_details.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <div class="app-container">
        <!-- Left Sidebar - AI Assistant -->
        <div class="sidebar">
            <div class="sidebar-header">
                <button class="new-chat-btn">
                    <i class="fas fa-plus"></i>
                    New Query
                </button>
            </div>
            
            <!-- Include Reusable Chat Component -->
            <div id="chatComponentContainer"></div>
        </div>
        
        <!-- Main Content Area -->
        <div class="main-content">
            <!-- Include Header Component -->
            <div id="header-placeholder"></div>
            
            <!-- Project Overview Section -->
            <div class="project-overview">
                <div class="overview-content">
                    <div class="overview-left">
                        <h1 class="project-title" id="project-title">Loading...</h1>
                        <p class="project-tagline" id="project-tagline">Loading...</p>
                        <div class="location-info">
                            <span class="location-span" id="location-span">Loading...</span>
                        </div>
                        <div class="project-status">
                            <span class="status-badge" id="status-badge">Loading...</span>
                            <span class="rera-number" id="rera-number">Loading...</span>
                        </div>
                    </div>
                    <div class="overview-right">
                        <div class="price-info">
                            <div class="starting-price">
                                <span class="price-label">Starting Price</span>
                                <span class="price-value" id="starting-price">Loading...</span>
                            </div>
                            <div class="price-per-sqft">
                                <span class="price-label">Price per sq ft</span>
                                <span class="price-value" id="price-per-sqft">Loading...</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Project Tour Section -->
            <section class="project-tour-section" id="projectTourSection" style="display: none;">
                <div class="section-header">
                    <h3>Project Tour</h3>
                    <p>Explore our project through images and videos</p>
                </div>
                
                <!-- Unified Media Slider -->
                <div class="media-slider-container" id="mediaSliderContainer" style="display: none;">
                    <div class="media-slider">
                        <button class="slider-btn prev-btn" onclick="slideMedia('prev')">
                            <i class="fas fa-chevron-left"></i>
                        </button>
                        <div class="media-slides" id="mediaSlides">
                            <!-- All media (images and videos) will be populated dynamically -->
                        </div>
                        <button class="slider-btn next-btn" onclick="slideMedia('next')">
                            <i class="fas fa-chevron-right"></i>
                        </button>
                    </div>
                </div>
            </section>

    <!-- Key Metrics Section -->
    <section class="key-metrics">
        <div class="metrics-container">
            <div class="metric-card">
                <div class="metric-icon">
                    <i class="fas fa-rupee-sign"></i>
                </div>
                <div class="metric-content">
                    <h3>Starting Price</h3>
                    <p class="metric-value">₹2.5Cr</p>
                </div>
            </div>
            <div class="metric-card">
                <div class="metric-icon">
                    <i class="fas fa-ruler-combined"></i>
                </div>
                <div class="metric-content">
                    <h3>Per Sq Ft</h3>
                    <p class="metric-value">₹18,500</p>
                </div>
            </div>
            <div class="metric-card">
                <div class="metric-icon">
                    <i class="fas fa-building"></i>
                </div>
                <div class="metric-content">
                    <h3>Total Units</h3>
                    <p class="metric-value">240</p>
                </div>
            </div>
            <div class="metric-card">
                <div class="metric-icon">
                    <i class="fas fa-bed"></i>
                </div>
                <div class="metric-content">
                    <h3>BHK Options</h3>
                    <p class="metric-value">1-4</p>
                </div>
            </div>
        </div>
    </section>

                    <!-- Residences Section -->
                <section class="residences-section">
                    <div class="residences-slider">
                        <button class="slider-btn prev-btn" onclick="slideResidences('prev')">
                            <i class="fas fa-chevron-left"></i>
                        </button>
                        <div class="residences-container">
                            <div class="residences-grid" id="residences-grid">
                                <!-- Residences will be populated dynamically -->
                            </div>
                        </div>
                        <button class="slider-btn next-btn" onclick="slideResidences('next')">
                            <i class="fas fa-chevron-right"></i>
                        </button>
                    </div>
                </section>



    <!-- Expandable Sections -->
    <section class="expandable-sections">
        <div class="accordion">
            <div class="accordion-item">
                <div class="accordion-header">
                    <h3>Project Progress</h3>
                    <i class="fas fa-plus"></i>
                </div>
                <div class="accordion-content">
                    <div class="progress-container">
                        <div class="progress-bar">
                            <div class="progress-step completed">
                                <div class="step-circle"></div>
                                <span class="step-label">Foundation</span>
                            </div>
                            <div class="progress-line"></div>
                            <div class="progress-step completed">
                                <div class="step-circle"></div>
                                <span class="step-label">Structure</span>
                            </div>
                            <div class="progress-line"></div>
                            <div class="progress-step in-progress">
                                <div class="step-circle"></div>
                                <span class="step-label">Interiors</span>
                            </div>
                            <div class="progress-line"></div>
                            <div class="progress-step pending">
                                <div class="step-circle"></div>
                                <span class="step-label">Handover</span>
                            </div>
                        </div>
                        <div class="progress-summary">
                            <div class="summary-item">
                                <span class="summary-value">75%</span>
                                <span class="summary-label">Overall Progress</span>
                            </div>
                            <div class="summary-item">
                                <span class="summary-value">18</span>
                                <span class="summary-label">Months Timeline</span>
                            </div>
                            <div class="summary-item">
                                <span class="summary-value">6</span>
                                <span class="summary-label">Months Remaining</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
                    <div class="accordion-item amenities-section">
            <div class="accordion-header">
                <h3>Amenities & Facilities</h3>
                    <i class="fas fa-plus"></i>
                </div>
                <div class="accordion-content">
                    <div class="amenities-grid" id="amenities-grid">
                        <!-- Amenities will be populated dynamically -->
                    </div>
                </div>
            </div>
            
            <div class="accordion-item">
                <div class="accordion-header">
                    <h3>Safety & Security Features</h3>
                    <i class="fas fa-plus"></i>
                </div>
                <div class="accordion-content">
                    <div class="safety-content" id="safety-content">
                        <!-- Safety content will be populated dynamically -->
                    </div>
                </div>
            </div>
            
            <div class="accordion-item">
                <div class="accordion-header">
                    <h3>Construction Materials & Specifications</h3>
                    <i class="fas fa-plus"></i>
                </div>
                <div class="accordion-content">
                    <div class="specs-grid" id="construction-specs">
                        <!-- Construction specs will be populated dynamically -->
                    </div>
                </div>
            </div>
            <div class="accordion-item">
                <div class="accordion-header">
                    <h3>Environmental & Utility Features</h3>
                    <i class="fas fa-plus"></i>
                </div>
                <div class="accordion-content">
                    <div class="features-grid" id="environmental-features">
                        <!-- Environmental features will be populated dynamically -->
                    </div>
                </div>
            </div>
            <div class="accordion-item">
                <div class="accordion-header">
                    <h3>Expert Review</h3>
                    <i class="fas fa-plus"></i>
                </div>
                <div class="accordion-content">
                    <div class="review-content" id="expert-review">
                        <!-- Expert review will be populated dynamically -->
                    </div>
                </div>
            </div>
            <div class="accordion-item nearby-places-section">
                <div class="accordion-header">
                    <h3>Nearby Areas & Connectivity</h3>
                    <i class="fas fa-plus"></i>
                </div>
                <div class="accordion-content">
                    <div class="connectivity-grid" id="nearby-connectivity">
                        <!-- Nearby areas and connectivity will be populated dynamically -->
                    </div>

                </div>
            </div>

        </div>
    </section>

    <!-- Call to Action Section -->
    <section class="cta-section">
        <div class="cta-content">
            <h2>Interested in Skyline Residency?</h2>
            <p>Get in touch with our sales team for site visits and booking details</p>
            <button class="schedule-btn">
                <i class="fas fa-calendar"></i>
                Schedule Appointment
            </button>
        </div>
    </section>

    <!-- BHK Configuration Modal -->
    <div id="bhkModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalTitle">BHK Configuration Details</h2>
                <span class="close-modal">&times;</span>
            </div>
            <div class="modal-body">
                <div class="modal-columns">
                    <div class="modal-left-column">
                        <div class="floor-plan-section">
                            <h3>Floor Plan</h3>
                            <div class="floor-plan-display" id="floorPlanDisplay">
                                <!-- Floor plan image will be displayed here -->
                                <div class="floor-plan-placeholder" id="floorPlanPlaceholder">
                                    <i class="fas fa-ruler-combined"></i>
                                    <p>Floor Plan</p>
                                    <p class="area-highlight" id="modalArea">650 sq ft</p>
                                </div>
                                <img id="floorPlanImage" class="floor-plan-image" style="display: none;" alt="Floor Plan">
                            </div>
                            <p class="price-onwards" id="modalPrice">₹2.5 Cr onwards</p>
                            <p class="carpet-area-info" id="modalCarpetArea">650 sq ft carpet area</p>
                        </div>
                    </div>
                    <div class="modal-right-column">
                        <div class="room-specifications-section">
                            <h3>Room Specifications</h3>
                            <div class="room-list" id="modalRoomList">
                                <!-- Room specifications will be populated dynamically -->
                            </div>
                        </div>
                    </div>
                </div>
                <div class="key-features-section">
                    <h3>Key Features</h3>
                    <div class="features-grid" id="modalFeatures">
                        <!-- Features will be populated dynamically -->
                    </div>
                </div>
                <div class="modal-cta">
                    <p id="modalCtaText">Interested in this configuration?</p>
                    <div class="action-buttons">
                        <button class="btn primary-btn">
                            <i class="fas fa-phone"></i> Call for Site Visit
                        </button>
                        <button class="btn secondary-btn">
                            <i class="fas fa-file-alt"></i> Get Brochure
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
        </div> <!-- Close main-content -->
    </div> <!-- Close app-container -->

    <!-- Media Modal for Bigger View -->
    <div id="mediaModal" class="modal">
        <div class="modal-content media-modal-content">
            <span class="close-modal media-close-btn">&times;</span>
            <div id="mediaModalContent">
                <!-- Media content will be displayed here -->
            </div>
        </div>
    </div>

    <script src="script.js"></script>
    <script src="project_details.js"></script>
    <script src="chat-component.js?v=2"></script>
    <script>
        // Load header component
        document.addEventListener('DOMContentLoaded', function() {
            fetch('header-component.html')
                .then(response => response.text())
                .then(html => {
                    document.getElementById('header-placeholder').innerHTML = html;
                })
                .catch(error => console.error('Error loading header:', error));
        });
        
        // Function to load chat component
        function loadChatComponent() {
            fetch('chat-component.html')
                .then(response => response.text())
                .then(html => {
                    document.getElementById('chatComponentContainer').innerHTML = html;
                    // Re-initialize chat component after loading HTML
                    new ChatComponent();
                })
                .catch(error => console.error('Error loading chat component:', error));
        }

        // Load chat component when DOM is ready
        document.addEventListener('DOMContentLoaded', function() {
            // Check if chat component already exists
            const chatContainer = document.getElementById('chatComponentContainer');
            if (chatContainer && !chatContainer.querySelector('.chat-container')) {
                loadChatComponent();
            } else {
                // Load normally
                loadChatComponent();
            }
        });

        // Also load chat component when page becomes visible (for back button navigation)
        document.addEventListener('pageshow', function(event) {
            if (event.persisted || (window.performance && window.performance.navigation.type === 2)) {
                // Page was loaded from back-forward cache or back button
                setTimeout(loadChatComponent, 100);
            }
        });

        // Additional fallback for back button navigation
        window.addEventListener('focus', function() {
            // Check if chat component is missing
            const chatContainer = document.getElementById('chatComponentContainer');
            if (chatContainer && !chatContainer.querySelector('.chat-container')) {
                loadChatComponent();
            }
        });

        // Periodic check to ensure chat component is always visible
        setInterval(function() {
            const chatContainer = document.getElementById('chatComponentContainer');
            if (chatContainer && !chatContainer.querySelector('.chat-container')) {
                loadChatComponent();
            }
        }, 2000); // Check every 2 seconds
    </script>
</body>
</html>
